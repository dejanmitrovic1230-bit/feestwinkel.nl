{% comment %}
  Product Inventory Snippet
  - This snippet is used to display the inventory of a product
  - This includes two key items (1) the inventory quantity and (2) the inventory transfer notice

  Parameters:
  - product: The product object
  - current_variant: The current variant object
  - block: The block object

  Usage:
  {% include 'product-inventory' with product: product, current_variant: current_variant, block: block %}
{% endcomment %}

{%- liquid
  assign show_low_inventory_message = false
  if current_variant.inventory_management == 'shopify'
    if current_variant.inventory_quantity <= block.settings.inventory_threshold and current_variant.inventory_quantity > 0
      # If inventory is low, show the low inventory message
      assign show_low_inventory_message = true
    endif
  endif

  assign oos_and_continue_selling = false
  if current_variant.inventory_quantity <= 0 and current_variant.inventory_policy == 'continue'
    assign oos_and_continue_selling = true
  endif

-%}

<div class="product-block product-block--sales-point" {{ block.shopify_attributes }}>
  <ul class="sales-points">
    <li class="sales-point">
      <span class="icon-and-text{% if show_low_inventory_message == true %} inventory--low{% endif %} {% if current_variant.inventory_quantity <= 0 %} inventory--out{% endif %}"
      >
        <span class="icon icon--inventory"></span>
        <span class="{{ current_variant }} productView-info-value">
                {% if current_variant.inventory_management or current_variant.available %}
                    {%- assign first_inventory = current_variant.inventory_quantity -%}

                    {%- if first_inventory > 0 -%}
                        {% if stock_level_display == 'show' %}{{ first_inventory }} {% endif %}
                        {{ 'products.product.in_stock' | t }}
                    {%- else -%}
                        {{ 'products.product.out_of_stock' | t }}
                    {%- endif -%}
                {% endif %}
        </span>
      </span>
    </li>
  </ul>
</div>